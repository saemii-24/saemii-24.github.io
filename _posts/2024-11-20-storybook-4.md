---
title: "Storybook을 사용해보자(4) - public 폴더를 인식하라!"
author: saemii
categories:
  - Storybook
tags:
  - [Storybook, Next.js, TailwindCSS]
date: 2024-11-20
last_modified_at: 2024-11-20
pin: true
---

(작성중~)

## 📌문제상황

chromatic을 이용해 storybook을 배포했다! 그런데 storybook에서는 제대로 보이던 이미지가, chromatic의 Snapshot에서는 제대로 보여지지 않는 문제가 발생했다!😣

현재 스토리가 어떻게 만들어졌는지 살펴보자면 아래와 같다.

1. mockData.ts에 객체 형식의 더미데이터를 두었다.
2. 더미데이터에 `{webformatImage: http:www.test.com/12345~}` 처럼 외부 url의 이미지를 넣어두었다.
3. next.js에서 해당 이미지 url을 인식할 수 있도록 next.config.js를 수정했다.
4. 이를 이용해 Story를 구성했다.

`npm run storybook` 을 이용해 localhost:6006번에 띄우는 storybook은 문제가 없었고, chromatic에서 배포된 storybook에서도 문제가 없었고, chromatic의 snapshot test에서만 문제가 되었다.

일단 해당 snapshot의 alt가 표시되고 있는 이미지 태그의 url을 확인해보니 어라?😲 url이 내가 생각하던 그 url이 아니었다.

```
https://snapshots.chromatic.com/snapshots/~
```

즉 사용자인 나에게 보여지기 전에 서버에서 snapshot을 만들어 이미지화 한 다음 보여지는 것인 만큼, http 주소로 시작되는 이미지를 클라이언트 단에서 불러오기 어렵겠다는 판단이 들었고, 이를 해결하기 위해 storybook에 필요한 mockdata 이미지를 public에서 관리하는 것으로 방향을 잡았다.

## ✅truncate

- <https://stackoverflow.com/questions/64016896/cant-serve-static-files-in-nextjs-storybook>
