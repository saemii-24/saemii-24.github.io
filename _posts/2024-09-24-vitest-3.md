---
title: "FEí…ŒìŠ¤íŠ¸(3) - React Testing Library"
author: saemii
categories:
  - Test
tags:
  - [Vitest, ReatTestingLibrary]
date: 2024-09-24
last_modified_at: 2024-09-24
pin: true
---

## ğŸ“Œì‹œì‘í•˜ë©°

ì´ë²ˆì—” vitestì™€ í•¨ê»˜ ì‚¬ìš©ë˜ì–´ ì‚¬ìš©ì ê´€ì ì—ì„œ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” React Testing Libraryì— ëŒ€í•´ ì•Œì•„ë³´ê³ ì í•œë‹¤.

React Testing LibraryëŠ” ì‹¤ì œ ì‚¬ìš©ìê°€ UIë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ ì´ˆì ì„ ë§ì¶° í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ë©°, ì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•œ APIë¥¼ ì‚´í´ë³´ì.

## âœ…DOM ìš”ì†Œ ì„ íƒ (get~)

DOM ìš”ì†Œë¥¼ ì„ íƒí•˜ëŠ” ë°©ì‹ (Queries)ëŠ” ì„¸ ê°€ì§€ ë°©ì‹ì´ ìˆë‹¤.

| ì¢…ë¥˜    | ì„¤ëª…                                                                      |
| ------- | ------------------------------------------------------------------------- |
| getBy   | ì¼ì¹˜í•˜ëŠ” ìš”ì†Œë¥¼ ì¦‰ì‹œ ë°˜í™˜, ìš”ì†Œê°€ ì—†ìœ¼ë©´ ì—ëŸ¬ ë°œìƒ                        |
| queryBy | ì¼ì¹˜í•˜ëŠ” ìš”ì†Œ ë°˜í™˜, ì—†ìœ¼ë©´ null ë°˜í™˜                                      |
| findBy  | ë¹„ë™ê¸°ì ìœ¼ë¡œ ìš”ì†Œ ì°¾ìŒ, ìš”ì†Œê°€ ì—†ì„ ë• Promise ê±°ë¶€, ì‹œê°„ì´ ì§€ë‚˜ë©´ ì¬ì‹œë„ |

### â¡ï¸getBy

| ì¢…ë¥˜                 | ì„¤ëª…                                                             |
| -------------------- | ---------------------------------------------------------------- |
| getByRole            | ì ‘ê·¼ì„± íŠ¸ë¦¬ ì´ìš©. **ê°€ì¥ ê¶Œì¥ë¨**                                |
| getByLabelText       | ì£¼ë¡œ í¼ í•„ë“œì˜ ë¼ë²¨ ì´ìš©í•´ ê²€ìƒ‰                                  |
| getByPlaceholderText | í”Œë ˆì´ìŠ¤ í™€ë”ë¥¼ ì´ìš©í•´ ê²€ìƒ‰                                      |
| getByText            | í…ìŠ¤íŠ¸ë¥¼ ì´ìš©í•´ ìš”ì†Œ ê²€ìƒ‰                                        |
| getByAltText         | alt ì†ì„±ì„ ê°€ì§„ ìš”ì†Œë¥¼ ê²€ìƒ‰                                      |
| getByTitle           | title ì†ì„±ì„ ê°€ì§„ ìš”ì†Œë¥¼ ê²€ìƒ‰                                    |
| getByTestId          | í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ elementì— ì´ë¦„ì„ ë¶™ì„. `data-testid`ë¥¼ ì‚¬ìš©í•´ ì •ì˜ |
| getByDisplayValue    | í¼ì—ì„œ í˜„ì¬ ì…ë ¥ëœ ê°’ ê¸°ë°˜ìœ¼ë¡œ ìš”ì†Œ ì„ íƒ                         |

### â¡ï¸screen

ì´ì œ ìœ„ì—ì„œ ì‚´í´ë³¸ ë‚´ìš©ì„ í™œìš©í•´ ìš”ì†Œë¥¼ ì°¾ì•„ë³´ì.
DOM ìš”ì†Œë¥¼ ì°¾ì„ ë•ŒëŠ” `screen` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œë‹¤.
screenì€ document.bodyì— ë°”ì¸ë”©ë˜ì–´ ìˆì–´, screen.getBy~ findBy~ ë“±ì„ ì‚¬ìš©í•´ DOMì—ì„œ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤.

```typescript
import { screen, render } from "@testing-library/react"
import { describe, it, expect } from "vitest"
import Example from "./Example"

describe("Example ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸", () => {
  it("Example ì»´í¬ë„ŒíŠ¸ ë‚´ ìš”ì†Œë¥¼ ê²€ìƒ‰í•œë‹¤.", () => {
    render(<Example />)
    const element = screen.getByText("ë‚´ê°€ ì°¾ëŠ” ìš”ì†Œ")
    expect(element).toBeInTheDocument()
  })
})
```

## âœ…ì´ë²¤íŠ¸ ì‹œë®¬ë ˆì´ì…˜

ìœ„ì—ì„œ DOMìš”ì†Œë¥¼ ì°¾ê³  ë Œë”ë§ í–ˆìœ¼ë‹ˆ ì´ë²ˆì—” ì‚¬ìš©ì ì´ë²¤íŠ¸ë¥¼ ì‹œë®¬ë ˆì´ì…˜ í•´ë³´ì.

### â¡ï¸fireEvent

ê°„ë‹¨í•œ ì‚¬ìš©ì ì´ë²¤íŠ¸ (click, change, keydown ë“±)ëŠ” fireEventë¥¼ ì´ìš©í•´ ì‹œë®¬ë ˆì´ì…˜ í•  ìˆ˜ ìˆë‹¤.

ì•„ë˜ ì˜ˆì œëŠ” ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ê³  ì‚¬ìš©ìê°€ í´ë¦­í•˜ëŠ” ìƒí™©ì„ í…ŒìŠ¤íŠ¸í•œë‹¤.

â€»ê³µì‹ ë¬¸ì„œì—ì„œëŠ” fireEvent ëŒ€ì‹  userEventë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ë¯€ë¡œ, ì•„ë˜ì— ì‘ì„±í•œ userEventë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ì.

```typescript
import { render, fireEvent, screen } from "@testing-library/react"
import { vi } from "vitest"

const Button = ({ onClick }) => <button onClick={onClick}>í´ë¦­í•˜ì„¸ìš”</button>

it("ë²„íŠ¼ í´ë¦­ ì‹œ onClick í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤", () => {
  // vitestë¥¼ ì´ìš©í•´ handleClickì´ë€ í•¨ìˆ˜ë¥¼ ëª¨í‚¹í•œë‹¤.
  const handleClick = vi.fn()

  // ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§ í•œë‹¤.
  render(<Button onClick={handleClick} />)

  //textë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìš”ì†Œë¥¼ ì°¾ê³ , í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.
  fireEvent.click(screen.getByText("í´ë¦­í•˜ì„¸ìš”"))

  // handleClick í•¨ìˆ˜ê°€ 1ë²ˆ í˜¸ì¶œ ë˜ëŠ” ê²ƒì„ ê²€ì¦í•œë‹¤.
  expect(handleClick).toHaveBeenCalledTimes(1)
})
```

fireEventë¡œ ê²€ì¦í•  ìˆ˜ ìˆëŠ” ì´ë²¤íŠ¸ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

| ì´ë²¤íŠ¸ ì´ë¦„   | ì„¤ëª…                         | ì˜ˆì‹œ ì½”ë“œ                                                                                             |
| ------------- | ---------------------------- | ----------------------------------------------------------------------------------------------------- |
| `click`       | í´ë¦­ ì´ë²¤íŠ¸                  | `fireEvent.click(screen.getByText("í´ë¦­"))`                                                           |
| `change`      | ê°’ì´ ë³€ê²½ë  ë•Œ (ì…ë ¥, ì„ íƒ)  | `fireEvent.change(screen.getByLabel("ì´ë¦„"), { target: { value: 'ì‹ ì§±êµ¬' } })`                        |
| `keydown`     | í‚¤ê°€ ëˆŒë ¸ì„ ë•Œ               | `fireEvent.keyDown(screen.getByText("í‚¤ë³´ë“œ ëˆ„ë¦„"), { key: 'Enter', code: 'Enter' })`                 |
| `keyup`       | í‚¤ê°€ ë–¼ì–´ì¡Œì„ ë•Œ             | `fireEvent.keyUp(screen.getByText("í‚¤ë³´ë“œ ë—Œ"), { key: 'Enter', code: 'Enter' })`                     |
| `keypress`    | í‚¤ê°€ ëˆŒë ¤ì¡Œì„ ë•Œ             | `fireEvent.keyPress(screen.getByText("í‚¤ë³´ë“œ ëˆŒë ¤ì§"), { key: 'a', code: 'KeyA' })`                   |
| `focus`       | í¬ì»¤ìŠ¤ê°€ ê°”ì„ ë•Œ             | `fireEvent.focus(screen.getByText("í¬ì»¤ìŠ¤"))`                                                         |
| `blur`        | í¬ì»¤ìŠ¤ê°€ ì‚¬ë¼ì§ˆ ë•Œ           | `fireEvent.blur(screen.getByText("ë¸”ëŸ¬"))`                                                            |
| `submit`      | í¼ ì œì¶œ ì´ë²¤íŠ¸               | `fireEvent.submit(screen.getByText("í¼ì„ ì œì¶œí•¨"))`                                                   |
| `mouseOver`   | ë§ˆìš°ìŠ¤ë¥¼ ìš”ì†Œ ìœ„ë¡œ ì˜¬ë ¸ì„ ë•Œ | `fireEvent.mouseOver(screen.getByText("ë§ˆìš°ìŠ¤ ì˜¤ë²„"))`                                                |
| `mouseOut`    | ë§ˆìš°ìŠ¤ë¥¼ ìš”ì†Œ ë°–ìœ¼ë¡œ ëºì„ ë•Œ | `fireEvent.mouseOut(screen.getByText("ë§ˆìš°ìŠ¤ ì•„ì›ƒ"))`                                                 |
| `drag`        | ë“œë˜ê·¸í•  ë•Œ                  | `fireEvent.drag(screen.getByText("ë“œë˜ê·¸ ì´ë²¤íŠ¸"))`                                                   |
| `dragStart`   | ë“œë˜ê·¸ë¥¼ ì‹œì‘í•  ë•Œ           | `fireEvent.dragStart(screen.getByText("ë“œë˜ê·¸ ì‹œì‘"))`                                                |
| `dragEnd`     | ë“œë˜ê·¸ë¥¼ ëë‚¼ ë•Œ             | `fireEvent.dragEnd(screen.getByText("ë“œë˜ê·¸ ë"))`                                                    |
| `drop`        | ë“œë¡­í•  ë•Œ                    | `fireEvent.drop(screen.getByText("ë“œë¡­ ì˜ì—­"), { dataTransfer: { files: [new File([], 'a.txt')] } })` |
| `input`       | ì…ë ¥ ì¤‘ ë°œìƒ                 | `fireEvent.input(screen.getByText("ì…ë ¥"), { target: { value: 'ì…ë ¥ ì¤‘' } })`                         |
| `doubleClick` | ë”ë¸” í´ë¦­ ì´ë²¤íŠ¸             | `fireEvent.doubleClick(screen.getByText("ë”ë¸” í´ë¦­"))`                                                |
| `contextMenu` | ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´(ì˜¤ë¥¸ìª½ í´ë¦­)   | `fireEvent.contextMenu(screen.getByText("ì˜¤ë¥¸ìª½ í´ë¦­"))`                                              |
| `touchStart`  | í„°ì¹˜ ì‹œì‘ (ëª¨ë°”ì¼ í™˜ê²½)      | `fireEvent.touchStart(screen.getByText("í„°ì¹˜ ì‹œì‘"))`                                                 |
| `touchEnd`    | í„°ì¹˜ ì¢…ë£Œ (ëª¨ë°”ì¼ í™˜ê²½)      | `fireEvent.touchEnd(screen.getByText("í„°ì¹˜ ì¢…ë£Œ"))`                                                   |
| `touchMove`   | í„°ì¹˜ ì´ë™ (ëª¨ë°”ì¼ í™˜ê²½)      | `fireEvent.touchMove(screen.getByText("í„°ì¹˜ ì´ë™"))`                                                  |
| `scroll`      | ìŠ¤í¬ë¡¤ ë°œìƒ                  | `fireEvent.scroll(screen.getByText("ìŠ¤í¬ë¡¤"))`                                                        |
| `resize`      | ì°½ í¬ê¸° ì¡°ì •                 | `fireEvent.resize(window)`                                                                            |

ê¸°ë³¸ì ìœ¼ë¡œëŠ” í•´ë‹¹ ìš”ì†Œë¥¼ ì°¾ê³ , ì›í•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œì¼œì£¼ë©´ ë˜ì§€ë§Œ, ë’¤ì— ì¶”ê°€ì ìœ¼ë¡œ ì†ì„±ì„ ì‘ì„±í•´ì•¼ í•˜ëŠ” ê²½ìš°ë„ ìˆë‹¤.

#### ğŸ’Ÿ targetê³¼ value

```typescript
fireEvent.change(screen.getByLabel("ì´ë¦„"), { target: { value: "ì‹ ì§±êµ¬" } })
fireEvent.input(screen.getByText("ì…ë ¥"), { target: { value: "ì…ë ¥ ì¤‘" } })
```

- target: ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ DOM ìš”ì†Œ
- value: í•´ë‹¹ ìš”ì†Œì— ì…ë ¥ëœ ê°’

ì˜ˆë¥¼ ë“¤ì–´, ë¹„ë°€ë²ˆí˜¸ inputì„ ê²€ì¦í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤ê³  ìƒê°í•´ë³´ì.
ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ì†Œë¬¸ìì™€ ìˆ«ìë§Œ ì‘ì„± ê°€ëŠ¥í•˜ë‹¤ë©´, íŠ¹ìˆ˜ë¬¸ì ì¼ë•Œ ì œëŒ€ë¡œ ì˜¤ë¥˜ë¥¼ ë°œìƒí•˜ëŠ”ì§€ ê²€ì¦í•´ì•¼ í•  ê²ƒì´ë‹¤.

ì¦‰ ì´ë ‡ê²Œ 'íŠ¹ì • ê°’ì˜ value'ë¥¼ ê²€ì¦í•´ì•¼í•  ë–„ (í•„ìš”í•  ë–„) í•´ë‹¹ valueì—
í…ŒìŠ¤íŠ¸ í•´ì•¼ í•˜ëŠ” ê°’ì„ ë„£ì–´ì£¼ëŠ” ê²ƒì´ë‹¤.

#### ğŸ’Ÿ keyì™€ code

- key: ì‹¤ì œë¡œ ì…ë ¥ëœ í‚¤
- code: ë¬¼ë¦¬ì ì¸ í‚¤ ìœ„ì¹˜

```typescript
fireEvent.keyDown(screen.getByText("í‚¤ë³´ë“œ ëˆ„ë¦„"), {
  key: "Enter",
  code: "Enter",
})
```

ì˜ ì´í•´ê°€ ì•ˆê°€ëŠ”ë°, ë‘ê°€ì§€ ìƒí™©ì„ ìƒê°í•´ë³´ì.

1. aì™€ Aë¥¼ ì…ë ¥í•  ë•Œ

   - Shift ì—†ì´ 'a'ë¥¼ ëˆ„ë¥´ë©´:
     key: 'a'
     code: 'KeyA'
   - Shiftë¥¼ ëˆ„ë¥´ê³  'a'ë¥¼ ëˆ„ë¥´ë©´:
     key: 'A' (ëŒ€ë¬¸ì A)
     code: 'KeyA' (ë¬¼ë¦¬ì ìœ¼ë¡œ ë™ì¼í•œ í‚¤)

2. ë‹¤ë¥¸ ë°°ì—´ì˜ í‚¤ë³´ë“œë¥¼ ì…ë ¥í•  ë•Œ
   ìš°ë¦¬ê°€ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì¿¼í‹° ë°°ì—´ê³¼ ë‹¤ë¥¸ í‚¤ë³´ë“œì˜ ê²½ìš° ê°™ì€ ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ë”ë¼ë„ ì…ë ¥ë˜ëŠ” ê°’ì€ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.
   (ì£¼ë¡œ codeëŠ” ì¿¼í‹° ê¸°ì¤€ìœ¼ë¡œ ì •í•´ì§„ë‹¤.)

## ğŸ—‚ï¸ì°¸ê³  ì‚¬ì´íŠ¸

- <https://testing-library.com/docs/dom-testing-library/intro>
