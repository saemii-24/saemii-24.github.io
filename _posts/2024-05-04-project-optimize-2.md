---
title: "최적화 적용(2) - Next Image"
author: saemii
categories:
  - Optimize
tags:
  - [Optimize, Next.js, Project]
date: 2024-05-04
last_modified_at: 2024-05-04
pin: true
---

## 📌시작하며

**(작성중~)**
사실 지금 프로젝트에서 이미지 최적화를 어떻게 하면 좋을지 고민이 많았다.(물론 지금도...)🤔 일단 이미지가 사용되는 전체적인 흐름은 다음과 같다.

<div class="mermaid" markdown="0" >
  graph LR;
  A(사용자 웹 접속, 데이터 요청) --> B(데이터 응답);
  B --> C(Next Image의 src 속성으로 사용);
</div>

사용자가 업로드한 이미지는 supabase의 storage에 업로드 되고, 이 '주소'값을 table에 저장해두었다가, src속성에 활용된다.
배포 후에 프로젝트의 lighthouse 검사를 하니 LCP 최적화가 필요하다고 하여, 고민에 빠지게 되었다.

> 지금 상황에서 어떤 최적화를 할 수 있을까?🤔

일단 프로젝트 내에서 사용되는 대부분의 이미지는 로컬환경에 저장된 이미지가 아닌, 사용자가 업로드 한 이미지에 관련되어 있기 때문에, 어떻게 최적화 해야할지 고민되었고 아래와 같은 몇가지 방법을 떠올렸다.

1. Next/Image를 좀 더 잘 활용할 수 없을까?
2. 사용자가 업로드한 이미지 파일을 경량 파일 형식인 WebP 파일로 변환 할 수 있을까?
3. 사용자가 업로드한 이미지 파일의 비율을 유지한채 적정한 크기로 저장해서 storage에 저장하면 어떨까?

2번 3번은 방법을 검색해보니 canvas API를 사용하면 된다고 하는데 아직 이 부분은 추가학습이 필요하니, 당장 할 수 있는 1번부터 차근차근 진행해보고자 한다.

## ✅next/Image
