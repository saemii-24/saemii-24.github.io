---
title: "SEO(3) - Next.js ì˜¤í”ˆê·¸ë˜í”„"
author: saemii
categories:
  - SEO
tags:
  - [Next.js, SEO, Web]
date: 2024-05-31
last_modified_at: 2024-05-31
pin: true
---

## ğŸ“Œì‹œì‘í•˜ë©°
Next.jsì—ì„œëŠ” ì´ì „ SEOí¬ìŠ¤íŒ…ì—ì„œ ì •ë¦¬í–ˆë˜ meta íƒœê·¸ë“¤ì„ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤. ê³µì‹ë¬¸ì„œ ì˜ˆì œë¥¼ ë³´ê³  ì‘ìš©í•´ë³´ë©´ì„œ ë°©ë²•ì„ ìµí˜”ëŠ”ë°, ì˜ì™¸ë¡œ(?) ì˜¤í”ˆê·¸ë˜í”„ ìª½ì€ ê³µì‹ë¬¸ì„œ ë‚´ìš©ì´ ë¶€ì¡±í•˜ë‹¤ê³  ëŠê¼ˆë‹¤... ğŸ˜… ê·¸ë˜ì„œì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ë‚˜ë¦„ ì‹œí–‰ì°©ì˜¤ë¥¼ ê±°ì¹˜ë©° í•™ìŠµí•œ Next.js ì˜¤í”ˆê·¸ë˜í”„ ì„¤ì •ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ê³ ì í•œë‹¤!

> ì´ ê¸€ì€ ì•„ë˜ì™€ ê°™ì´ ì´ì–´ì§‘ë‹ˆë‹¤.
>
> - [SEO(1)](https://saemii-24.github.io/posts/seo-1/)
> - [SEO(2)](https://saemii-24.github.io/posts/seo-2/)
> - [SEO(3)](https://saemii-24.github.io/posts/seo-3/)

## âœ…ì •ì  ì´ë¯¸ì§€ ì‚¬ìš©

ë§Œì•½ ì˜¤í”ˆê·¸ë˜í”„ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ì´ë¯¸ì§€ê°€ íŠ¹ì •ë˜ì–´ ìˆëŠ” ê²½ìš°ëŠ” ì–´ë–»ê²Œ í• ê¹Œ?

ë¨¼ì € íŒŒì¼ êµ¬ì¡°ë¥¼ ì‚´í´ë³´ì!

```
app/
â””â”€â”€ second/
    â”œâ”€â”€ opengraph-image.jpg
    â””â”€â”€ page.tsx
```

í˜„ì¬ second í˜ì´ì§€ í´ë”ì— opengraph-image.jpg íŒŒì¼ì„ ë„£ì–´ë‘ì—ˆë‹¤. ì•„ë˜ í‘œì—ì„œ ì‚´í´ë³¼ ìˆ˜ ìˆëŠ” í¬ë§·ë“¤ë¡œ ì´ë¯¸ì§€ë“¤ì„ ì§€ì •í•´ì£¼ë©´ ëœë‹¤.

| File Convention | Supported File Types    |
| --------------- | ----------------------- |
| opengraph-image | .jpg, .jpeg, .png, .gif |
| twitter-image   | .jpg, .jpeg, .png, .gif |

ê³µì‹ë¬¸ì„œì—ì„œëŠ” ì´ë ‡ê²Œë§Œ ë„£ì–´ë‘ë©´ ìë™ìœ¼ë¡œ ì ìš©ë˜ëŠ” ê²ƒ ì²˜ëŸ¼ ì„œìˆ  ë˜ì–´ìˆëŠ”ë°.. **ì•ˆëœë‹¤**ğŸ˜…...

ì´ ë¶€ë¶„ì€ ë”°ë¡œ page.tsxì—ì„œ ì²˜ë¦¬í•´ì•¼ í•œë‹¤.

```typescript
//page.tsx
import ogImage from "./opengraph-image.jpg"

export const metadata = {
  metadataBase: new URL("ë°°í¬í˜ì´ì§€ ì£¼ì†Œ"),
  title: "2ë²ˆì§¸ í˜ì´ì§€",
  description: "2ë²ˆì§¸ í˜ì´ì§€ ì„¤ëª…",
  openGraph: {
    images: [
      {
        title: "2ë²ˆì§¸ í˜ì´ì§€ ì˜¤í”ˆê·¸ë˜í”„",
        description: "2ë²ˆì§¸ í˜ì´ì§€ ì˜¤í”ˆê·¸ë˜í”„ ì„¤ëª…",
        url: ogImage.src,
        width: ogImage.width,
        height: ogImage.height,
      },
    ],
  },
}

export default function Second() {
  return (
    <main className="flex min-h-screen flex-col items-center justify-between p-24">
      <h1>SecondPage</h1>
    </main>
  )
}
```

ë¨¼ì € opengraph-image.jpgë¥¼ ogImage ë€ ì´ë¦„ìœ¼ë¡œ ë¶ˆëŸ¬ì™€ì„œ, url, width, heightì— ê°ê° ì§€ì •í•´ì£¼ì—ˆë‹¤.

ì´ë ‡ê²Œ metadataë¥¼ ì§€ì •í•´ì£¼ë©´, ì˜¤í”ˆê·¸ë˜í”„ê°€ ì ì ˆíˆ ì ìš©ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

## âœ…jsx ë¬¸ë²•ìœ¼ë¡œ ì´ë¯¸ì§€ ë§Œë“¤ì–´ ë„£ê¸°

ì´ë¯¸ ë§Œë“¤ì–´ì ¸ ìˆëŠ” ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ jsx ë¬¸ë²•ì„ ì´ìš©í•´ ì´ë¯¸ì§€ë¥¼ ì œì‘í•´ ì ìš©í•  ìˆ˜ ë„ ìˆë‹¤. íŒŒì¼êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì§€ì •í•´ì¤€ë‹¤.

```
app/
â””â”€â”€ third/
    â”œâ”€â”€ opengraph-image.tsx
    â””â”€â”€ page.tsx
```

ì´ì œ ì´ opengraph-image.tsx íŒŒì¼ì—ì„œ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ ì¤„ ê±´ë°, ì´ ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ImageResponseë‹¤.

### â¡ï¸ImageResponse

ImageResponse ìƒì„±ìë¥¼ ì‚¬ìš©í•˜ë©´ JSX ë° CSSë¥¼ ì‚¬ìš©í•´ ë™ì  ì´ë¯¸ì§€ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ì´ ImageResponseëŠ” HTMLê³¼ CSSë¥¼ SVGë¡œ ë³€í™˜í•˜ëŠ” Satorië¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤. ì°¸ê³ ë¡œ ì´ë ‡ê²Œ ì œì‘ëœ ì˜¤í”ˆê·¸ë˜í”„ëŠ” ì •ë§ 'ì´ë¯¸ì§€'ë¡œ ë³€í™˜ ë˜ë¯€ë¡œ, ê²€ìƒ‰ë„êµ¬ë¡œ ë ˆì´ì•„ì›ƒì´ë‚˜ ì»¬ëŸ¬ë¥¼ ìˆ˜ì •í•  ìˆ˜ ì—†ë‹¤.

[Satori](https://github.com/vercel/satori#css)ëŠ” React Nativeì™€ ë™ì¼í•œ Flexbox ë ˆì´ì•„ì›ƒ ì—”ì§„ì„ ì‚¬ìš© í•˜ì§€ë§Œ ì™„ë²½í•˜ê²Œ ëª¨ë“  CSSë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒì— ìœ ì˜í•œë‹¤.

> ImageResponseëŠ” 14ë²„ì „ ë¶€í„° next/serverê°€ ì•„ë‹Œ **next/og**ì—ì„œ import í•´ì™€ì•¼ í•œë‹¤!

ê°„ë‹¨í•˜ê²Œ ì•„ë˜ì™€ ê°™ì´ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ë³´ì•˜ë‹¤.

```javascript
import { ImageResponse } from "next/og"

export const runtime = "edge"

// Image metadata
export const alt = "second"
export const size = {
  width: 1200,
  height: 630,
}

export const contentType = "image/png"

// Image generation
export default async function Image() {
  const font = await fetch(
    new URL(
      "../../assets/fonts/NotoSansKR-SemiBold-Subset.woff",
      import.meta.url
    )
  ).then((res) => res.arrayBuffer())

  return new ImageResponse(
    (
      <div
        style={{
          fontFamily: "NotoSansKR-Light",
          fontSize: 128,
          background: "white",
          backgroundSize: "cover",
          backgroundPosition: "center",
          width: "100%",
          height: "100%",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
        }}
      >
        third Page!
      </div>
    ),
    // ImageResponse options
    {
      ...size,
      fonts: [
        {
          name: "NotoSansKR-Light",
          data: font,
          weight: 600,
        },
      ],
    }
  )
}
```

ì‚¬ìš©ìê°€ ì›í•˜ëŠ” í°íŠ¸ë¥¼ ì´ìš©í•´ ì´ë¯¸ì§€ë¥¼ ì œì‘í•˜ê¸° ìœ„í•´ì„œëŠ” assets í´ë”ì— í°íŠ¸íŒŒì¼ì„ ë„£ì–´ì„œ ì•„ë˜ì™€ ê°™ì´ ë¶ˆëŸ¬ì˜¨ ë‹¤ìŒ ì ìš©í•´ì£¼ë©´ ëœë‹¤.

```javascript
const font = await fetch(
  new URL("../../assets/fonts/NotoSansKR-SemiBold-Subset.woff", import.meta.url)
).then((res) => res.arrayBuffer())
```

ì´ ë•Œ, ttf, woffëŠ” ì‚¬ìš©ê°€ëŠ¥í•˜ì§€ë§Œ woff2ë¥¼ ì‚¬ìš©í•˜ê³ ì í•˜ë‹ˆ **ë°°í¬ì‹œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤.** ë˜í•œ í°íŠ¸ íŒŒì¼ì´ í° ê²½ìš° ë¬´ë£Œë²„ì „ vercelì—ì„œëŠ” **ë°°í¬ ì˜¤ë¥˜ê°€ ë°œìƒ**í•˜ë¯€ë¡œ ì£¼ì˜í•˜ì.

ì‹¤ì œ í˜ì´ì§€ì— ì˜¤í”ˆê·¸ë˜í”„ë‚˜ íŠ¸ìœ„í„°ì¹´ë“œì— ë§Œë“  ì´ë¯¸ì§€ë¥¼ ì ìš©í•˜ë ¤ê³  í•  ë•ŒëŠ” ì•„ë˜ì™€ ê°™ì´ ì ìš©í•´ì£¼ë©´ ëœë‹¤. (images ê²½ë¡œì— ì£¼ì˜í•œë‹¤!)

```javascript
export const metadata = {
  openGraph: {
    images: [
      {
        url: "http://test.com/third/opengraph-image",
      },
    ],
  },
  twitter: {
    images: [
      {
        url: "http://test.com/third/opengraph-image",
      },
    ],
  },
}

export default function Third() {
  return (
    <main className="flex min-h-screen flex-col items-center justify-between p-24">
      <h1>ThirdPage</h1>
    </main>
  )
}
```

## âœ…ì´ëª¨ì§€ ì‚¬ìš©í•˜ê¸°

ë°”ë¡œ ìœ„ ì˜ˆì œì— ì´ì–´ì„œ, ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ ë•Œ ì´ëª¨ì§€ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì´ opengraph-image.tsxì— ì‘ì„±í•´ì£¼ë©´ ëœë‹¤.

```javascript
import { ImageResponse } from "next/og"

export default async function GET() {
  return new ImageResponse(
    (
      <div
        style={{
          fontSize: 100,
          color: "black",
          background: "white",
          width: "100%",
          height: "100%",
          padding: "50px 200px",
          textAlign: "center",
          justifyContent: "center",
          alignItems: "center",
        }}
      >
        ğŸ‘‹, ğŸŒ ì•ˆë…•!
      </div>
    ),
    {
      width: 1200,
      height: 630,
      // Supported options: 'twemoji', 'blobmoji', 'noto', 'openmoji', 'fluent' and 'fluentFlat'
      // Default to 'fluent'
      emoji: "noto",
    }
  )
}
```

ì´ëª¨ì§€ì˜ ìƒê¹€ìƒˆì˜ ê²½ìš° 'twemoji', 'blobmoji', 'noto', 'openmoji', 'fluent', 'fluentFlat' ì—ì„œ ì„ íƒí•  ìˆ˜ ìˆê³ , ë””í´íŠ¸ ê°’ì€ fluentë¡œ ì§€ì •ë˜ì–´ ìˆë‹¤.

ì ìš©ì€ ìœ„ì˜ ì˜ˆì œì™€ ë™ì¼í•˜ê²Œ ì´ë¯¸ì§€ ê²½ë¡œì— ì£¼ì˜í•´ì„œ ì‘ì„±í•´ì£¼ë©´ ëœë‹¤.

## âœ…ë™ì ìœ¼ë¡œ ì˜¤í”ˆê·¸ë˜í”„ ë§Œë“¤ê¸°

ê°€ì¥ ê¶ê¸ˆí–ˆë˜ ë™ì ìœ¼ë¡œ ì˜¤í”ˆê·¸ë˜í”„ ë§Œë“¤ê¸° ğŸ˜
ì´ ë°©ë²•ì„ ì´ìš©í•´ ë¸”ë¡œê·¸ë‚˜ ë‹¤ë¥¸ í˜ì´ì§€ì— ì ì ˆí•œ ì˜¤í”ˆê·¸ë˜í”„ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

íŒŒì¼ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```
src/
  â”œâ”€â”€ app/
  â”‚   â”œâ”€â”€ api/
  â”‚   â”‚   â””â”€â”€ og/
  â”‚   â”‚       â””â”€â”€ route.ts
  â”‚   â””â”€â”€ fifth/
  â”‚       â””â”€â”€ [id]/
  â”‚           â””â”€â”€ page.tsx
  â””â”€â”€ data.json
```

ë¨¼ì € ë™ì ìœ¼ë¡œ ì˜¤í”ˆê·¸ë˜í”„ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ json íŒŒì¼ì„ ë§Œë“¤ì–´ ì£¼ì—ˆë‹¤.

```
//data.json

[
  {
    "id": 0,
    "title": "ì§±êµ¬",
    "og": "https://image.ì§±êµ¬ì´ë¯¸ì§€"
  },
  {
    "id": 1,
    "title": "ì‹ ë¹„ì•„íŒŒíŠ¸",
    "og": "https://image.ì‹ ë¹„ì•„íŒŒíŠ¸ì´ë¯¸ì§€"
  }
]

```

ê·¸ ë‹¤ìŒ, Next.jsì˜ api ê¸°ëŠ¥ì„ í™œìš©í•´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•´ì£¼ì—ˆë‹¤. ì´ë•Œ, ì‘ë‹µì€ ì´ë¯¸ì§€ íŒŒì¼ë¡œ ì¤„ ìˆ˜ ìˆë„ë¡ ImageResponseë¥¼ í™œìš©í•œë‹¤.

```typescript
import { ImageResponse } from "next/og"
import posts from "../../../data.json"

export const runtime = "edge"

const size = {
  width: 1200,
  height: 630,
}

export async function GET(request: Request, response: Response) {
  try {
    const { searchParams } = new URL(request.url)
    const hasId = searchParams.has("id")

    if (hasId) {
      const id = Number(searchParams.get("id"))
      const { og, title } = posts[id]
      return new ImageResponse(
        (
          // ImageResponse JSX ì‘ì„±
          <div
            style={{
              fontSize: 128,
              width: "100%",
              height: "100%",
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
            }}
          >
            {title}
          </div>
        ),
        {
          ...size,
        }
      )
    } else {
      return new ImageResponse(<div>ì´ë¯¸ì§€ì—†ìŒ</div>)
    }
  } catch (e: any) {
    return new Response("ì‹¤íŒ¨", { status: 500 })
  }
}
```

ì‹¤ì œ í™œìš©í•  ë•ŒëŠ”, page.tsxì—ì„œ image urlì„ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œ api ì—”ë“œí¬ì¸íŠ¸ë¥¼ í™œìš©í•´ idëŠ” ì¿¼ë¦¬ìŠ¤íŠ¸ë§ìœ¼ë¡œ ë„˜ê²¨ì£¼ë©´ ëœë‹¤.

```javascript
//page.tsx
import posts from "../../../data.json"
import { Metadata, ResolvingMetadata } from "next"

type Props = {
  params: { id: string },
  searchParams: { [key: string]: string | string[] | undefined },
}

export async function generateMetadata(
  { params, searchParams }: Props,
  parent: ResolvingMetadata
): Promise<Metadata> {
  // read route params
  const id = Number(params.id)
  const { title, og } = posts[id]

  return {
    title: title + " ì„¤ëª…" || "default title",
    openGraph: {
      title: title + "ì˜¤í”ˆê·¸ë˜í”„ ì œëª©" || "ì˜¤í”ˆê·¸ë˜í”„ ì œëª©",
      description: title + "ì˜¤í”ˆê·¸ë˜í”„ ì„¤ëª…" || "ì˜¤í”ˆê·¸ë˜í”„ ì„¤ëª…",
      images: [
        {
          url: `https://test.com/api/og?id=${id}`,
          width: 800,
          height: 600,
          alt: title + "ì˜¤í”ˆê·¸ë˜í”„ ì´ë¯¸ì§€",
        },
      ],
    },
    twitter: {
      title: title + "íŠ¸ìœ„í„° ì œëª©" || "íŠ¸ìœ„í„° ì œëª©",
      description: title + "íŠ¸ìœ„í„° ì„¤ëª…" || "íŠ¸ìœ„í„° ì„¤ëª…",
      images: [
        {
          url: `https://test.com/api/og?id=${id}`,
          width: 800,
          height: 600,
          alt: title + "íŠ¸ìœ„í„° ì´ë¯¸ì§€",
        },
      ],
    },
  }
}
export default function Page({ params, searchParams }: Props) {
  return (
    <main className="flex min-h-screen flex-col items-center justify-between p-24">
      <h1>FifthPage {params.id}</h1>
    </main>
  )
}
```

ì´ ë°©ë²•ì„ í™œìš©í•˜ë©´ ê° í˜ì´ì§€ì— ì ì ˆí•œ ì˜¤í”ˆê·¸ë˜í”„ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤!

## ğŸ“©ë§ˆë¬´ë¦¬

Next.jsë¥¼ ê³µë¶€í•  ë•Œ ë³´ì•˜ë˜ ê³µì‹ë¬¸ì„œëŠ” ëŒ€ë¶€ë¶„ ì„¤ëª…ì´ ìì„¸í–ˆëŠ”ë° ì˜¤í”ˆê·¸ë˜í”„ëŠ” ì„¤ëª…ì´ ì¢€ ì•„ì‰¬ì› ë˜ ë¶€ë¶„ì´ ìˆë‹¤. ğŸ˜… ê·¸ë˜ì„œ ì´ë²ˆì—” êµ¬ê¸€ë§, ì˜ìƒ, ì§ì ‘ ë¶€ë”ªí˜€ë³´ê¸°(?) ë“±ìœ¼ë¡œ ì˜¤í”ˆê·¸ë˜í”„ ì„¤ì •ì— ëŒ€í•´ í•™ìŠµí•  ìˆ˜ ìˆì—ˆë‹¤.

ë¯¸ë¦¬ ì´ë ‡ê²Œ ê´€ë ¨ ì˜ˆì œ ëª¨ë“  ë°©ë²•ì„ ì‹¤í–‰í•´ë´ì„œ ë‹¤í–‰ì¸ê²Œ, ì ìš©ì„ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ê³„ì† ë°°í¬í•˜ê³  í™•ì¸í•˜ëŠ” ê³¼ì •ì´ ê½¤ë‚˜ ë²ˆê±°ë¡œì› ê³  ì‹œí–‰ì°©ì˜¤ê°€ ìˆì—ˆê¸°ì— ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì— ë°”ë¡œ ì ìš©í•˜ë ¤ê³  í–ˆìœ¼ë©´ ë” ë§ì€ ì‹œê°„ì´ ì†Œìš”ë˜ì—ˆì„ ê²ƒ ê°™ë‹¤... ğŸ¤”

ì–´ì¨Œë“ , ì˜¤í”ˆê·¸ë˜í”„ ì ìš© ë°©ë²•ì„ ì•Œì•˜ìœ¼ë‹ˆ í¬íŠ¸í´ë¦¬ì˜¤ì—ë„ ì˜¤í”ˆê·¸ë˜í”„ë¥¼ ì ì ˆíˆ ì ìš©í•´ì„œ, SEO ê°œì„ ê³¼ SNS ê³µìœ ì‹œì—, í›¨ì”¬ ë‚˜ì€ ì´ë¯¸ì§€ë¥¼ ì œê³µí•  ìˆ˜ ìˆì„ ë“¯ í•˜ë‹¤. ğŸ˜

## ğŸ—‚ï¸ì°¸ê³  ì‚¬ì´íŠ¸

- <https://www.youtube.com/watch?v=QHi4XZ8K72A>
- <https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image>
- <https://vercel.com/guides/using-emoji-in-image>
