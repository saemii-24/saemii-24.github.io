---
title: "SEO(3) - Next.js 오픈그래프"
author: saemii
categories:
  - SEO
tags:
  - [Next.js, SEO, Web]
date: 2024-05-31
last_modified_at: 2024-05-31
pin: true
---

## 📌시작하며

(작성중~)
Next.js에서는 이전 SEO포스팅에서 정리했던 meta 태그들을 간단하게 만들 수 있는 방법을 제공한다. 공식문서 예제를 보고 응용해보면서 방법을 익혔는데, 의외로(?) 오픈그래프 쪽은 공식문서 내용이 부족하다고 느꼈다... 😅 그래서이번 포스팅에서는 나름 시행착오를 거치며 학습한 Next.js 오픈그래프 설정에 대해 정리해보고자 한다!

> 이 글은 아래와 같이 이어집니다.
>
> - [SEO(1)](https://saemii-24.github.io/posts/seo-1/)
> - [SEO(2)](https://saemii-24.github.io/posts/seo-2/)
> - [SEO(3)](https://saemii-24.github.io/posts/seo-3/)

## ✅정적 이미지 사용

만약 오픈그래프로 사용하고 싶은 이미지가 특정되어 있는 경우는 어떻게 할까?

먼저 파일 구조를 살펴보자!

```
app/
└── second/
    ├── opengraph-image.jpg
    └── page.tsx
```

현재 second 페이지 폴더에 opengraph-image.jpg 파일을 넣어두었다. 아래 표에서 살펴볼 수 있는 포맷들로 이미지들을 지정해주면 된다.

| File Convention     | Supported File Types    |
| ------------------- | ----------------------- |
| opengraph-image     | .jpg, .jpeg, .png, .gif |
| twitter-image       | .jpg, .jpeg, .png, .gif |
| opengraph-image.alt | .txt                    |
| twitter-image.alt   | .txt                    |

사실 공식문서에선, image 파일과 alt가 적힌 txt 파일을 두면 자동으로 오프그래프가 적용된다고는 하는데...**안된다.** 👿
그럼 어떻게 하는가!

meta 데이터를 생성해 적용해보자.

###

## ✅ImageResponse

ImageResponse 생성자를 사용하면 JSX 및 CSS를 사용해 동적 이미지를 생성할 수 있어, 이를 이용해 오픈 그래프 이미지, 트위터 카드 등을 만들 수 있다!

> ImageResponse는 14버전 부터 next/server가 아닌 **next/og**에서 import 해와야 한다!

```javascript

import { ImageResponse } from 'next/og'

new ImageResponse(
  element: ReactElement,
  options: {
    width?: number = 1200
    height?: number = 630
    emoji?: 'twemoji' | 'blobmoji' | 'noto' | 'openmoji' = 'twemoji',
    fonts?: {
      name: string,
      data: ArrayBuffer,
      weight: number,
      style: 'normal' | 'italic'
    }[]
    debug?: boolean = false

    // Options that will be passed to the HTTP response
    status?: number = 200
    statusText?: string
    headers?: Record<string, string>
  },
)
```

CSS를 작성하는 방식은 위와 같이 key와 value 값으로 작성해야 한다. 자세한 내용은 [이 글](https://github.com/vercel/satori#css)을 참고한다.

## 🗂️참고 사이트

- <https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image>
