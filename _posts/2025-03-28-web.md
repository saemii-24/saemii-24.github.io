---
title: "sessionStorage 사용기"
author: saemii
categories:
  - web
tags:
  - [web]
date: 2025-03-28
last_modified_at: 2025-03-28
pin: true
---

# ✨ sessionStorage 사용기

오늘은 업무에서 sessionStorage를 사용했었는데, 과정을 정리해보고자 한다.

## 🚨문제 정의

> 💡 사용자가 특정 B페이지에 접속하면 자동으로 스크롤 이벤트가 일어나야 한다.

위의 내용을 바탕으로 간단하게 해당 구현해야 할 기능을 정의해보자면, 아래와 같다.

- Trigger: 사용자가 B페이지 접속
- Event: Scroll

이렇듯 기능 정의 자체는 크게 어려운 것이 없었으나..😂 사용자가 B페이지에 접속하는 방법은 (당연히) 많을 수 밖에 없고, 접속하는 방식에 따라 표시되는 내용이 다르기 떄문에 이벤트 구현 세부사항이 다를 수밖에 없었다.

일단 내가 생각한 사용자의 B 페이지 접속 루트는 아래와 같았다.

- A에서 B로 접속
- A 제외 페이지에서 B로 접속
- URL 입력하여 B 바로 접속
- B에서 새로고침
- (또 다른게 있을 수도...)

여기서 1차로 구분되어야 하는건 **사용자가 A페이지에서 넘어온 것인지, 아님 그 외의 페이지에서 B로 넘어온 것인지** 였다.

## 1️⃣ 1차 시도, #해시

1차 아이디어는 **URL의 해시(#)를 사용하는 방식**이었다. A 페이지에서 B페이지로 넘어올 때는 `router.push`를 이용하는 것이기 때문에 push할 때 `#new`를 붙인 url을 사용한다면 해당 페이지가 A에서 넘어온 것을 알 수 있을 것이었다!

또 hash값이 존재하는지 확인하는 `useHash` 라는 custom Hook도 이미 만들어 둔 상태였다.

사실 1차 방법에서 나는 진짜 탁월한(...) 아이디어라 생각하고 나름 뿌듯해했으나 **문제는 B에서 새로고침 하던 상황이었다.**

사실 처음에 해당 부분까진 고려를 못했기에 문제가 없었으나(...) 조금만 더 생각해보면 문제가 있음을 알 수 있다.

- A 페이지에서 `#new` 해시값을 붙여 B페이지로 보냄
- B 페이지에 작성된 코드는 `#new`를 보고 이 페이지가 A에서 이동한 것이라 판단함
- **이 때 사용자가 ‼️새로고침 함**
- `#new` 페이지에서 `#new`페이지로 접속함

마지막을 자세히 살펴보자.

새로고침 직전의 페이지는 B페이지 자신이므로, 이전 페이지는 A 페이지가 아니다. 따라서, `#new`를 사용하면 잘못된 이벤트 trigger가 작동하게 되는 것이다!

## ✅ 2차 시도, sessionStorage

이 난관을 어찌 해결할 것인가...😣 에 대해서 생각해보다, 사용자의 브라우저 탐색기록을 저장해두었다가 사용하면 되지 않을까? 생각했다.

최초에는 나에게 익숙한 `localStorage`를 먼저 떠올렸으나 localStorage는 (반)영구적인 데이터 저장소기 때문에, 사용자가 탭을 닫거나 하는 등 변수가 늘어나게 되어, 그동안은 써보지 않았던 `sessionStorage`를 사용하게 되었다!

## 🗂️참고 사이트

- <https://developer.mozilla.org/ko/docs/Web/API/Window/sessionStorage>
