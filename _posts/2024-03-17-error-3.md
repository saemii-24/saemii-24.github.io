---
title: "Warning: A component is changing an uncontrolled input to be controlled."
author: saemii
categories:
  - Error
tags:
  - [Error, Next.js, React]
date: 2024-03-17
last_modified_at: 2024-03-17
pin: true
---

## â›”ë¬¸ì œìƒí™©

inputì„ ì‚¬ìš©í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ë‹¤ ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤.

> app-index.js:35 Warning: A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: <https://reactjs.org/link/controlled-components>

## ğŸ¤”ì´ìœ 

> ê°’ì´ ì •ì˜ë˜ì§€ ì•Šì€ ê°’ì—ì„œ ì •ì˜ëœ ê°’ìœ¼ë¡œ ë³€ê²½ë˜ì–´ ë°œìƒí•œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì—ëŸ¬ ë¬¸êµ¬ë¥¼ ì½ì–´ë³´ë©° ì™œ ì´ëŸ° ì—ëŸ¬ê°€ ë°œìƒí–ˆëŠ”ì§€ íŒíŠ¸ë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆëŠ”ë°, `value` ê°’ì„ ë„£ìœ¼ë©´ì„œ ë°œìƒí•œ ì˜¤ë¥˜ë¡œ ë³´ì˜€ë‹¤.

<div class="mermaid" markdown="0" >
graph LR;
A(useQueryë¡œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°) --> B(atomìœ¼ë¡œ ê´€ë¦¬);
B--> C(useEffectì—ì„œ langì— ë”°ë¼<br/> defaultTranslate state ì§€ì •);
C--> D(inputì˜ valueê°’ìœ¼ë¡œ ì‚¬ìš©)
</div>

ì´ëŸ° íë¦„ì„ í†µí•´ inputì˜ valueê°’ì„ ë„£ëŠ”ë°, react ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë˜ê¸° ì „ì—, valueì˜ ì´ˆê¸°ê°’ì´ë‚˜ ì´ì „ê°’ì´ undefinedì˜€ë‹¤ê°€, ì¶” í›„ì— ì‹¤ì œ ê°’ìœ¼ë¡œ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

#### âŒê¸°ì¡´ ì½”ë“œ

```typescript
export default function MusicTranslateEdit({id, lang}: PropsType) {
  //recoil
  const music = useRecoilValue(musicAtom)

  //ì´ë¯¸ ì‘ì„±ë˜ì–´ ìˆëŠ” ê°€ì‚¬ ë¶ˆëŸ¬ì˜¤ê¸°
  let [defaultTranslate, setDefaultTranslate] = useState<string[]>([])
  useEffect(() => {
    if (lang === "ko" && music.kotranslate) {
      let splitTranslate = music.kotranslate.split("\n")
      setDefaultTranslate(splitTranslate)
    } else if (lang === "jp" && music.jptranslate) {
      let splitTranslate = music.jptranslate.split("\n")
      setDefaultTranslate(splitTranslate)
    }
  }, [music, lang])

  return (
    <input
      value={defaultTranslate[index]} ğŸ‘ˆ
      type="text"
      {...register(`lyrics_${index}`, { required: true })}
      id="title"
    />
  )
}
```

## âœ…í•´ê²°

ì´ˆê¸°ê°’ì´ undefinedê°€ ì•„ë‹ˆë©´ ë˜ê¸° ë•Œë¬¸ì— `""`ë¥¼ ì´ìš©í•´ ê°„ë‹¨íˆ í•´ê²°í–ˆë‹¤.

```typescript
return (
  <input
    value={defaultTranslate[index] ? defaultTranslate[index] : ""} ğŸ‘ˆ
    type="text"
    {...register(`lyrics_${index}`, { required: true })}
    id="title"
  />
)
```
